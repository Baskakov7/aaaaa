<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dom Veka ‚Äî –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–º–∞ –≤ –õ–û –∏ –°–ü–±</title>
<meta name="description" content="Dom Veka ‚Äî —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–æ–º–æ–≤ –≤ –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –∏ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ. –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, —Ä–∞–∑—É–º–Ω—ã–µ —Ü–µ–Ω—ã." />
<meta name="author" content="Dom Veka" />
<!-- –¶–≤–µ—Ç —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥ —Ç–µ–º—ã -->
<meta name="theme-color" content="#f8fafc" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#0b1220" media="(prefers-color-scheme: dark)">
<meta id="dynamic-theme-color" name="theme-color" content="#f8fafc">
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<!-- –®—Ä–∏—Ñ—Ç—ã -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet" media="all" />
<link rel="canonical" href="https://–≤–∞—à-—Å–∞–π—Ç.github.io/" />
<!-- Open Graph / Twitter -->
<meta property="og:title" content="Dom Veka ‚Äî –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–º–∞ –≤ –õ–û –∏ –°–ü–±" />
<meta property="og:description" content="–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –¥–æ–º–æ–≤. –ö–∞—á–µ—Å—Ç–≤–æ, —Å—Ç–∏–ª—å, –∫–æ–º—Ñ–æ—Ä—Ç." />
<meta property="og:type" content="website" />
<meta property="og:image" content="https://–≤–∞—à-—Å–∞–π—Ç.github.io/house1.jpg" />
<meta property="og:url" content="https://–≤–∞—à-—Å–∞–π—Ç.github.io/" />
<meta property="og:site_name" content="Dom Veka" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Dom Veka ‚Äî –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–º–∞ –≤ –õ–û –∏ –°–ü–±" />
<meta name="twitter:description" content="–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, —Ä–∞–∑—É–º–Ω—ã–µ —Ü–µ–Ω—ã." />
<meta name="twitter:image" content="https://–≤–∞—à-—Å–∞–π—Ç.github.io/house1.jpg" />
<!-- JSON-LD -->
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "Organization",
"name": "Dom Veka",
"url": "https://–≤–∞—à-—Å–∞–π—Ç.github.io/",
"logo": "https://–≤–∞—à-—Å–∞–π—Ç.github.io/logo.png",
"email": "info@domveka.ru",
"telephone": "+7-812-123-45-67",
"address": {
"@type": "PostalAddress",
"addressLocality": "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥",
"addressRegion": "–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
"addressCountry": "RU"
}
}
</script>
<script type="application/ld+json">
{
"@context":"https://schema.org",
"@type":"WebSite",
"name":"Dom Veka",
"url":"https://–≤–∞—à-—Å–∞–π—Ç.github.io/",
"potentialAction":{
"@type":"SearchAction",
"target":"https://–≤–∞—à-—Å–∞–π—Ç.github.io/?q={search_term_string}",
"query-input":"required name=search_term_string"
}
}
</script>
<script type="application/ld+json">
{
"@context":"https://schema.org",
"@graph":[
{
"@type":"Product",
"name":"46",
"category":"–î–æ–º",
"brand":{"@type":"Brand","name":"Dom Veka"},
"url":"https://–≤–∞—à-—Å–∞–π—Ç.github.io/#p1",
"image":"https://–≤–∞—à-—Å–∞–π—Ç.github.io/house1.jpg",
"description":"–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–∏—Ä–ø–∏—á–Ω—ã–π –¥–æ–º, 250 –º¬≤, –∫–ª–∞—Å—Å A+.",
"offers":{"@type":"AggregateOffer","priceCurrency":"RUB","lowPrice":"35000000","highPrice":"48000000","availability":"https://schema.org/InStock"}
},
{
"@type":"Product",
"name":"–õ–æ—Ñ—Ç 180",
"category":"–î–æ–º",
"brand":{"@type":"Brand","name":"Dom Veka"},
"url":"https://–≤–∞—à-—Å–∞–π—Ç.github.io/#p2",
"image":"https://–≤–∞—à-—Å–∞–π—Ç.github.io/house2.jpg",
"description":"–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≥–∞–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π –¥–æ–º, 180 –º¬≤, –∫–ª–∞—Å—Å A.",
"offers":{"@type":"AggregateOffer","priceCurrency":"RUB","lowPrice":"20000000","highPrice":"28000000","availability":"https://schema.org/InStock"}
}
]
}
</script>
<style>
:root{
--bg:#f8fafc; --text:#0f172a; --muted:#475569;
--card:#ffffff; --border:#e2e8f0;
--accent:#0ea5e9; --accent-contrast:#ffffff;
--shadow:rgba(2,6,23,.12); --focus:#38bdf8;
--hero-overlay:linear-gradient(180deg, rgba(2,6,23,.62), rgba(2,6,23,.42), rgba(2,6,23,0));
--nav-bg:rgba(255,255,255,.92);
--safe-bottom:env(safe-area-inset-bottom, 0px);
--theme-color:#f8fafc;
}
@media (prefers-color-scheme: dark){
:root{
--bg:#0b1220; --text:#e6edf6; --muted:#a9b4c7;
--card:#0f172a; --border:#1f2937;
--accent:#7dd3fc; --accent-contrast:#071521;
--shadow:rgba(0,0,0,.35); --focus:#7dd3fc;
--hero-overlay:linear-gradient(180deg, rgba(0,0,0,.74), rgba(0,0,0,.54), rgba(0,0,0,.12));
--nav-bg:rgba(11,18,32,.7);
--theme-color:#0b1220;
}
}
[data-theme="light"]{
--bg:#f8fafc; --text:#0f172a; --muted:#475569; --card:#fff; --border:#e2e8f0;
--accent:#0ea5e9; --accent-contrast:#fff; --shadow:rgba(2,6,23,.12); --focus:#38bdf8;
--hero-overlay:linear-gradient(180deg, rgba(2,6,23,.66), rgba(2,6,23,.44), rgba(2,6,23,0));
--nav-bg:rgba(255,255,255,.96);
--theme-color:#f8fafc;
}
[data-theme="dark"]{
--bg:#0b1220; --text:#e6edf6; --muted:#a9b4c7; --card:#0f172a; --border:#1f2937;
--accent:#7dd3fc; --accent-contrast:#071521; --shadow:rgba(0,0,0,.35); --focus:#7dd3fc;
--hero-overlay:linear-gradient(180deg, rgba(0,0,0,.76), rgba(0,0,0,.56), rgba(0,0,0,.14));
--nav-bg:rgba(11,18,32,.72);
--theme-color:#0b1220;
}
html{scroll-behavior:smooth;}
@media (prefers-reduced-motion: reduce){ html{scroll-behavior:auto;} *{animation:none !important;transition:none !important;} }
body{
margin:0; font-family:'Montserrat',system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
background:var(--bg); color:var(--text); line-height:1.6; color-scheme:light dark;
}
a{color:inherit; text-decoration:none;}
a:hover{text-decoration:underline; text-underline-offset:2px;}
a:focus-visible,button:focus-visible,input:focus-visible,select:focus-visible,textarea:focus-visible{
outline:2px solid var(--focus); outline-offset:3px; border-radius:6px;
}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;}
.progress{position:fixed;top:0;left:0;height:3px;width:100%;
background:linear-gradient(90deg,#38bdf8,#22d3ee,#10b981);
transform-origin:0 0; transform:scaleX(0); z-index:9999;}
header.hero{position:relative;overflow:hidden;color:#fff;text-align:center;
min-height:clamp(360px,60vh,720px);display:grid;place-items:center;}
header.hero::before{content:"";position:absolute;inset:0;background:var(--hero-overlay);z-index:1;}
.hero-media{position:absolute;inset:0;z-index:0;}
.hero-media img{width:100%;height:100%;object-fit:cover;filter:saturate(1.05) contrast(1.05) brightness(0.9);transform:scale(1.03);}
.hero-content{position:relative;z-index:2;padding:clamp(24px,4vw,48px) 20px;}
h1{font-size:clamp(1.8rem,4.2vw,2.8rem);margin:0 0 8px;}
.tagline{font-size:clamp(1rem,2.2vw,1.2rem);margin:0 0 16px;color:#f0f0f0;}
.hero-cta{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;}
header .theme-toggle{position:absolute;right:16px;top:16px;background:var(--accent);color:var(--accent-contrast);
border:none;padding:10px 12px;border-radius:24px;cursor:pointer;font-weight:600;box-shadow:0 2px 10px var(--shadow);z-index:2;}
header .theme-toggle[aria-pressed="true"]{filter:brightness(.96);}
.brand-logo{display:inline-flex;align-items:center;justify-content:center;padding:10px 12px;border-radius:18px;
background: color-mix(in srgb, #000 16%, transparent);backdrop-filter:saturate(1.2) blur(2px);
box-shadow:0 6px 20px rgba(0,0,0,.22);margin-bottom:10px;transform:translateY(0);
transition:transform .25s ease, box-shadow .25s ease, background .25s ease;animation:logo-pop .55s cubic-bezier(.2,.7,.2,1) .12s both;}
.brand-logo:hover{transform:translateY(-2px); box-shadow:0 10px 26px rgba(0,0,0,.28);}
.logo-img{width:clamp(140px, 28vw, 240px);height:auto;display:block;border-radius:14px;
filter:drop-shadow(0 8px 18px rgba(0,0,0,.25));transition:transform .25s ease, filter .25s ease;}
.brand-logo:hover .logo-img{transform:scale(1.02); filter:saturate(1.05) drop-shadow(0 10px 22px rgba(0,0,0,.32));}
nav{background:var(--nav-bg); border-bottom:1px solid var(--border);
position:sticky; top:0; z-index:10; backdrop-filter:saturate(1.2) blur(10px);
transition:transform .28s ease, background .2s ease;}
nav.nav-hidden{transform:translateY(-110%);}
nav ul{display:flex;justify-content:center;flex-wrap:wrap;list-style:none;margin:0;padding:10px;gap:10px 18px;}
nav ul li a{font-weight:600;padding:6px 10px;border-radius:8px;}
nav ul li a:hover{background:color-mix(in srgb, var(--card) 75%, transparent);}
section{padding:clamp(28px,4vw,48px) 20px; max-width:1100px; margin:auto; content-visibility:auto; contain-intrinsic-size:600px;}
h2{font-size:clamp(1.3rem,3vw,1.8rem);margin-bottom:16px;}
.subtle{color:var(--muted);}
/* –ì–∞–ª–µ—Ä–µ—è –∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
.gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;}
.gallery[role="list"] > article[role="listitem"]{list-style:none;}
.gallery.compact .card-img-wrap img.card-img{max-height:150px;}
@media (max-width:600px){ .gallery.compact .card-img-wrap img.card-img{max-height:130px;} }
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden;
box-shadow:0 2px 8px var(--shadow);transform-style:preserve-3d;transition:transform .18s ease, box-shadow .18s ease;}
.card:hover{transform:translateY(-3px) perspective(800px) rotateX(1deg) rotateY(-1deg); box-shadow:0 6px 20px var(--shadow);}
/* –û–±—ë—Ä—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è + –∫–∞—Ä—É—Å–µ–ª—å */
.card-img-wrap{position:relative;overflow:hidden;background:#f6f7f9;}
.card-img{display:block;width:100%;height:auto;max-height:220px;object-fit:contain;object-position:center;background:#f6f7f9;transition:transform .25s ease;}
.card:hover .card-img{ transform:scale(1.04); }
.img-preview{display:block;cursor:zoom-in;}
/* –†—É—á–Ω–æ–µ –ª–∏—Å—Ç–∞–Ω–∏–µ –∫–∞—Ä—É—Å–µ–ª–∏ */
.card-nav-btn{
position:absolute; top:50%; transform:translateY(-50%);
background:rgba(0,0,0,.45); color:#fff; border:none; width:34px; height:34px; border-radius:999px;
display:grid; place-items:center; cursor:pointer; backdrop-filter:blur(4px);
box-shadow:0 4px 10px rgba(0,0,0,.25); padding:0;
}
.card-nav-btn:hover{ background:rgba(0,0,0,.6); }
.card-prev{ left:8px; }
.card-next{ right:8px; }
.card-idx{
position:absolute; bottom:8px; right:8px;
background:rgba(0,0,0,.45); color:#fff; font-size:.85em; padding:2px 8px; border-radius:10px;
}
/* –°–µ—Ç–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
.card-body{padding:16px;display:grid;gap:8px;}
.gallery.compact .card-body{padding:12px;gap:6px;}
.card-body .meta{display:flex;flex-wrap:wrap;gap:8px 12px;color:var(--muted);font-size:.95em;}
.dim{opacity:.28; filter:saturate(.85);}
/* –ö–Ω–æ–ø–∫–∏ –∏ —Ñ–æ—Ä–º—ã */
.btn{background:var(--accent);color:var(--accent-contrast);border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600;min-width:120px;text-align:center;}
.btn.secondary{background:transparent;color:var(--text);border:1px solid var(--border);}
.btn.secondary:hover{background:color-mix(in srgb, var(--card) 60%, transparent);border-color:color-mix(in srgb, var(--border) 70%, var(--accent) 30%);}
.btn:disabled{opacity:.6;cursor:not-allowed;}
.toolbar{display:flex; gap:8px; flex-wrap:wrap; margin:6px 0 12px;}
/* –§–æ—Ä–º—ã */
input,textarea,select{width:100%;padding:12px;margin-top:10px;margin-bottom:14px;border:1px solid var(--border);border-radius:8px;font-family:inherit;font-size:1em;background:var(--bg);color:var(--text);}
label{font-weight:600;}
input[type="submit"],.submit{background:var(--accent);color:var(--accent-contrast);border:none;cursor:pointer;transition:transform .05s ease;}
input[type="submit"]:hover,.submit:hover{transform:translateY(-1px);}
input:invalid,textarea:invalid,select:invalid{border-color:#ef4444;}
input:valid,textarea:valid,select:valid{border-color:color-mix(in srgb, var(--border) 60%, var(--focus) 40%);}
#price,#mortgageResult,#keyRateStatus{font-weight:bold;}
/* –ü–æ—è–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–π */
.fade-in{opacity:0;transform:translateY(20px);}
.fade-in.anim-shown{animation:fadeIn .8s ease-out forwards;}
@keyframes fadeIn{to{opacity:1;transform:translateY(0);}}
html:not(.js) .fade-in{opacity:1;transform:none;}
/* –≠—Ñ—Ñ–µ–∫—Ç—ã */
.shake{animation:shake .28s ease;}
@keyframes shake{10%,90%{transform:translateX(-1px);}20%,80%{transform:translateX(2px);}30%,50%,70%{transform:translateX(-4px);}40%,60%{transform:translateX(4px);}}
/* –¢–∞–±–ª–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è */
.compare-table{width:100%;border-collapse:collapse;overflow:hidden;border-radius:12px;border:1px solid var(--border);}
.compare-table th,.compare-table td{border-bottom:1px solid var(--border);padding:12px;text-align:left;vertical-align:top;background:var(--bg);}
.compare-table th{background:var(--card);font-weight:700;}
/* Toast */
.toast{position:fixed;bottom:calc(20px + var(--safe-bottom));right:20px;background:var(--accent);color:var(--accent-contrast);
padding:10px 14px;border-radius:10px;box-shadow:0 4px 16px var(--shadow);opacity:0;transform:translateY(10px);transition:all .25s ease;z-index:1000;}
.toast.show{opacity:1;transform:translateY(0);}
/* Back-to-top */
#backToTop{position:fixed;right:18px;bottom:calc(84px + var(--safe-bottom));background:var(--accent);color:var(--accent-contrast);
border:none;padding:10px 12px;border-radius:999px;cursor:pointer;box-shadow:0 2px 10px var(--shadow);opacity:0;transform:translateY(10px);transition:all .2s ease;z-index:1000;}
#backToTop.show{opacity:1;transform:translateY(0);}
/* Sticky CTA */
.sticky-cta{position:sticky;bottom:0;z-index:9;background:color-mix(in srgb, var(--bg) 85%, transparent);
border-top:1px solid var(--border);padding:10px 16px calc(10px + var(--safe-bottom));
display:flex;justify-content:center;gap:12px;backdrop-filter:saturate(1.2) blur(6px);}
footer{padding:20px;text-align:center;color:var(--muted);}
/* –ö–∞—Ä—Ç–∞ –≤ –±–ª–æ–∫–µ —Ä–∞–π–æ–Ω–æ–≤ */
.map-embed{width:100%;height:380px;border:0;border-radius:12px;}
/* –ú–∏–Ω–∏-–¥–∏–∞–≥—Ä–∞–º–º–∞ */
.chart-card{background:var(--card); border:1px solid var(--border); border-radius:12px; padding:12px;}
.chart-legend{display:flex; gap:12px; flex-wrap:wrap; margin-top:8px; font-size:.95em;}
.chart-legend span{display:inline-flex; align-items:center; gap:6px;}
.chart-legend i{display:inline-block; width:12px; height:12px; border-radius:3px;}
/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
#modalImg{
position:fixed; inset:0; z-index:9999; display:grid; place-items:center;
background:rgba(0,0,0,.85); padding:2vh; opacity:0; visibility:hidden;
transition:opacity .2s ease, visibility .2s ease;
}
#modalImg[aria-hidden="false"]{ opacity:1; visibility:visible; }
#modalImg__img{ max-width:90vw; max-height:90vh; border-radius:12px; box-shadow:0 10px 40px rgba(0,0,0,.5); background:#111;}
#modalImg__close{
position:absolute; top:14px; right:14px; background:rgba(255,255,255,.12);
color:#fff; border:0; border-radius:10px; padding:8px 10px; cursor:pointer; backdrop-filter:blur(4px);
}
/* –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ –º–æ–¥–∞–ª–∫–µ */
#modalImg__prev,#modalImg__next{
position:absolute; top:50%; transform:translateY(-50%);
background:rgba(255,255,255,.14); color:#fff; border:0; width:40px; height:40px;
border-radius:999px; display:grid; place-items:center; cursor:pointer; backdrop-filter:blur(4px);
box-shadow:0 6px 20px rgba(0,0,0,.35);
}
#modalImg__prev{ left:16px; }
#modalImg__next{ right:16px; }
#modalImg__prev:hover,#modalImg__next:hover{ background:rgba(255,255,255,.22); }
#modalImg__idx{
position:absolute; bottom:16px; right:16px; background:rgba(255,255,255,.14); color:#fff;
font-size:.95em; padding:4px 10px; border-radius:10px; backdrop-filter:blur(4px);
}
/* –ü–µ—á–∞—Ç—å */
@media print{
header,nav,#toast,#backToTop,.theme-toggle,.sticky-cta{display:none !important;}
section{padding:0;}
a::after{content:" (" attr(href) ")";font-size:.9em;color:#555;}
}
</style>
</head>
<body>
<a href="#about" class="sr-only">–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É</a>
<div class="progress" id="progress"></div>
<header class="hero">
<button class="theme-toggle" id="themeToggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" aria-pressed="false" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">üåó –¢–µ–º–∞</button>
<div class="hero-media" aria-hidden="true">
<img src="house1.jpg" alt="" width="1600" height="1000" loading="eager" fetchpriority="high" decoding="async" />
</div>
<div class="hero-content">
<div class="brand-logo">
<img src="logo.png" class="logo-img" alt="Dom Veka" width="220" height="80" decoding="async" />
</div>
<h1>Dom Veka</h1>
<p class="tagline">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–º–∞ –≤ –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –∏ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ</p>
<div class="hero-cta">
<a href="#gallery" class="btn">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–µ–∫—Ç—ã</a>
<a href="#contact" class="btn secondary">–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</a>
</div>
</div>
</header>
<nav aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è" id="mainNav">
<ul>
<li><a href="#about">–û –∫–æ–º–ø–∞–Ω–∏–∏</a></li>
<li><a href="#gallery">–ü—Ä–æ–µ–∫—Ç—ã</a></li>
<li><a href="#compare">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ</a></li>
<li><a href="#calculator">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a></li>
<li><a href="#mortgage">–ò–ø–æ—Ç–µ–∫–∞</a></li>
<li><a href="#qa">–†–∞–π–æ–Ω—ã</a></li>
<li><a href="#contact">–°–≤—è–∑—å</a></li>
</ul>
</nav>
<section id="about" class="fade-in">
<h2>–û –∫–æ–º–ø–∞–Ω–∏–∏</h2>
<p>Dom Veka ‚Äî –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏—Ö—Å—è –Ω–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–µ –¥–æ–º–æ–≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –æ—Ç 15 –¥–æ 50 –º–ª–Ω ‚ÇΩ. –ú—ã —Å–æ–∑–¥–∞—ë–º –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ, —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∏ —Å—Ç–∏–ª—å–Ω—ã–µ –¥–æ–º–∞, —É—á–∏—Ç—ã–≤–∞—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞. –†–∞–±–æ—Ç–∞–µ–º –≤ –õ–û –∏ –°–ü–±, —Å–æ–±–ª—é–¥–∞–µ–º —Å—Ä–æ–∫–∏ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –∫–∞—á–µ—Å—Ç–≤–æ.</p>
<p class="subtle">–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥—Ä—è–¥—á–∏–∫–∏ ‚Ä¢ –§–∏–∫—Å–∏—Ä—É–µ–º —Å—Ä–æ–∫–∏ ‚Ä¢ –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Å–º–µ—Ç–∞ ‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏—è –¥–æ 5 –ª–µ—Ç</p>
</section>
<section id="gallery" class="fade-in" aria-labelledby="projects-heading">
<h2 id="projects-heading">–ì–∞–ª–µ—Ä–µ—è –ø—Ä–æ–µ–∫—Ç–æ–≤</h2>
<!-- Toolbar: —Ñ–∏–ª—å—Ç—Ä—ã –∏ –≤–∏–¥ -->
<div class="toolbar">
<button class="btn" id="filterBrick" type="button">–ö–∏—Ä–ø–∏—á–Ω—ã–µ –¥–æ–º–∞</button>
<button class="btn" id="filterAac" type="button">–ì–∞–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–µ –¥–æ–º–∞</button>
<button class="btn secondary" id="resetFilter" type="button">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä</button>
<button class="btn secondary" id="viewComfort" type="button" title="–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–∏–¥">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π</button>
<button class="btn secondary" id="viewCompact" type="button" title="–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–∏–¥">–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π</button>
</div>
<div class="subtle" style="margin-bottom:12px;">–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ 2 –ø—Ä–æ–µ–∫—Ç–æ–≤ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</div>
<div class="gallery" id="projectsGrid" role="list">
<!-- –ü—Ä–æ–µ–∫—Ç 1 -->
<article class="card" data-id="p1" role="listitem" id="p1" data-images="house1.jpg,house1_2.jpg,house1_3.jpg">
<div class="card-img-wrap" tabindex="0" aria-label="–ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–∞ 46">
<a href="house1.jpg" class="img-preview">
<img src="house1.jpg" alt="–ü—Ä–æ–µ–∫—Ç ¬´46¬ª ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–∏—Ä–ø–∏—á–Ω—ã–π –¥–æ–º" width="1200" height="800" loading="lazy" decoding="async" class="card-img" />
</a>
<!-- –†—É—á–Ω–æ–µ –ª–∏—Å—Ç–∞–Ω–∏–µ -->
<button class="card-nav-btn card-prev" type="button" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ">‚Äπ</button>
<button class="card-nav-btn card-next" type="button" aria-label="–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ">‚Ä∫</button>
<div class="card-idx" aria-hidden="true">1/3</div>
</div>
<div class="card-body">
<h3 style="margin:0;">46</h3>
<div class="meta">
<span>–ö–∏—Ä–ø–∏—á–Ω—ã–π</span><span>250 –º¬≤</span><span>–ö–ª–∞—Å—Å A+</span><span>4 —Å–ø–∞–ª—å–Ω–∏</span>
</div>
<div class="subtle">–û—Ç <strong data-price="p1">‚Äî</strong></div>
<div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:6px;">
<label class="btn secondary" style="display:flex; align-items:center; gap:8px; cursor:pointer;">
<input type="checkbox" class="compareCheck" data-id="p1" aria-label="–°—Ä–∞–≤–Ω–∏—Ç—å –ø—Ä–æ–µ–∫—Ç 46" /> –°—Ä–∞–≤–Ω–∏—Ç—å
</label>
<button class="btn" data-gen="p1" aria-controls="desc-p1">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ</button>
<button class="btn secondary" data-share="p1" aria-label="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ–µ–∫—Ç–æ–º 46" title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
</div>
<p class="subtle" id="desc-p1" style="margin:8px 0 0;" aria-live="polite"></p>
</div>
</article>
<!-- –ü—Ä–æ–µ–∫—Ç 2 -->
<article class="card" data-id="p2" role="listitem" id="p2" data-images="house2.jpg,house2_2.jpg,house2_3.jpg">
<div class="card-img-wrap" tabindex="0" aria-label="–ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–∞ –õ–æ—Ñ—Ç 180">
<a href="house2.jpg" class="img-preview">
<img src="house2.jpg" alt="–ü—Ä–æ–µ–∫—Ç ¬´–õ–æ—Ñ—Ç 180¬ª ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≥–∞–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π –¥–æ–º" width="1200" height="800" loading="lazy" decoding="async" class="card-img" />
</a>
<!-- –†—É—á–Ω–æ–µ –ª–∏—Å—Ç–∞–Ω–∏–µ -->
<button class="card-nav-btn card-prev" type="button" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ">‚Äπ</button>
<button class="card-nav-btn card-next" type="button" aria-label="–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ">‚Ä∫</button>
<div class="card-idx" aria-hidden="true">1/3</div>
</div>
<div class="card-body">
<h3 style="margin:0;">–õ–æ—Ñ—Ç 180</h3>
<div class="meta">
<span>–ì–∞–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π</span><span>180 –º¬≤</span><span>–ö–ª–∞—Å—Å A</span><span>3 —Å–ø–∞–ª—å–Ω–∏</span>
</div>
<div class="subtle">–û—Ç <strong data-price="p2">‚Äî</strong></div>
<div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:6px;">
<label class="btn secondary" style="display:flex; align-items:center; gap:8px; cursor:pointer;">
<input type="checkbox" class="compareCheck" data-id="p2" aria-label="–°—Ä–∞–≤–Ω–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –õ–æ—Ñ—Ç 180" /> –°—Ä–∞–≤–Ω–∏—Ç—å
</label>
<button class="btn" data-gen="p2" aria-controls="desc-p2">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ</button>
<button class="btn secondary" data-share="p2" aria-label="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ–µ–∫—Ç–æ–º –õ–æ—Ñ—Ç 180" title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
</div>
<p class="subtle" id="desc-p2" style="margin:8px 0 0;" aria-live="polite"></p>
</div>
</article>
</div>
</section>
<section id="compare" class="fade-in" hidden>
<div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
<h2>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤</h2>
<button class="btn secondary" id="clearCompare">–û—á–∏—Å—Ç–∏—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ</button>
</div>
<div id="compareHint" class="subtle" style="margin-bottom:12px;">–í—ã–±–µ—Ä–∏—Ç–µ –¥–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</div>
<div id="compareTableWrap" aria-live="polite"></div>
</section>
<section id="calculator" class="fade-in">
<h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏</h2>
<label for="area">–ü–ª–æ—â–∞–¥—å –¥–æ–º–∞ (–º¬≤):</label>
<input type="number" id="area" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 250" min="50" max="1000" step="10" inputmode="numeric" autocomplete="off" />
<label for="type">–¢–∏–ø –¥–æ–º–∞:</label>
<select id="type">
<option value="brick" data-price="150000">–ö–∏—Ä–ø–∏—á–Ω—ã–π</option>
<option value="aac" data-price="120000">–ì–∞–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π</option>
</select>
<label for="finish">–û—Ç–¥–µ–ª–∫–∞:</label>
<select id="finish">
<option value="base" data-mult="1">–ß–∏—Å—Ç–æ–≤–∞—è</option>
<option value="premium" data-mult="1.15">–ü—Ä–µ–º–∏—É–º</option>
<option value="shell" data-mult="0.85">–ë–µ–∑ –æ—Ç–¥–µ–ª–∫–∏</option>
</select>
<label for="energy">–≠–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</label>
<select id="energy">
<option value="A" data-mult="1.05">A / A+</option>
<option value="B" data-mult="1">B</option>
<option value="C" data-mult="0.95">C</option>
</select>
<p id="price" role="status" aria-live="polite">–°—Ç–æ–∏–º–æ—Å—Ç—å: ‚Äî</p>
<div style="display:flex; gap:8px; flex-wrap:wrap;">
<button class="btn" id="usePriceForMortgage" disabled>–ü–µ—Ä–µ–¥–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ –∏–ø–æ—Ç–µ—á–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</button>
<button class="btn secondary" id="copyEstimate" disabled>–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—á—ë—Ç</button>
</div>
<p class="subtle">–†–∞—Å—á—ë—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω–æ–π –æ—Ñ–µ—Ä—Ç–æ–π.</p>
<!-- –ú–∏–Ω–∏‚Äë–¥–∏–∞–≥—Ä–∞–º–º–∞ —Ü–µ–Ω –∑–∞ –º¬≤ -->
<div class="chart-card" id="priceChartWrap" aria-live="polite">
<h3 style="margin:6px 0 8px;">–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –∑–∞ –º¬≤ (–æ—Ä–∏–µ–Ω—Ç–∏—Ä)</h3>
<div id="priceChart"></div>
<div class="chart-legend">
<span><i style="background: var(--accent);"></i> –ö–∏—Ä–ø–∏—á–Ω—ã–π</span>
<span><i style="background: color-mix(in srgb, var(--accent) 60%, #10b981 40%);"></i> –ì–∞–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π</span>
</div>
</div>
</section>
<section id="mortgage" class="fade-in">
<h2>–ò–ø–æ—Ç–µ—á–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2>
<div style="display:grid;grid-template-columns:1fr;gap:0;">
<label for="homePrice">–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ–º–∞ (‚ÇΩ):</label>
<input type="number" id="homePrice" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 25000000" min="1000000" step="50000" inputmode="numeric" />
<label for="downPayment">–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å (‚ÇΩ):</label>
<input type="number" id="downPayment" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 5000000" min="0" step="50000" inputmode="numeric" />
<label for="rate">–°—Ç–∞–≤–∫–∞, % –≥–æ–¥–æ–≤—ã—Ö:</label>
<div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
<input type="number" id="rate" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 15" min="1" max="40" step="0.1" inputmode="decimal" style="flex:1 1 220px;" />
<button class="btn secondary" id="refreshKeyRate" type="button" title="–û–±–Ω–æ–≤–∏—Ç—å –ø–æ –∫–ª—é—á–µ–≤–æ–π —Å—Ç–∞–≤–∫–µ –¶–ë">–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞–≤–∫—É –¶–ë</button>
</div>
<p id="keyRateStatus" class="subtle" aria-live="polite"></p>
<label for="years">–°—Ä–æ–∫, –ª–µ—Ç:</label>
<input type="number" id="years" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 20" min="1" max="40" step="1" inputmode="numeric" />
</div>
<button class="btn" id="calcMortgage">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–ª–∞—Ç—ë–∂</button>
<p id="mortgageResult" role="status" aria-live="polite">‚Äî</p>
<p class="subtle">–ü–æ–¥—Å–∫–∞–∑–∫–∞: –∫–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ ‚Äî –Ω–µ –±–æ–ª–µ–µ 30‚Äì40% –æ—Ç –¥–æ—Ö–æ–¥–∞ —Å–µ–º—å–∏.</p>
</section>
<section id="qa" class="fade-in">
<h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —Ä–∞–π–æ–Ω–∞–º</h2>
<label for="district">–í–≤–µ–¥–∏—Ç–µ —Ä–∞–π–æ–Ω/–Ω–∞—Å–µ–ª—ë–Ω–Ω—ã–π –ø—É–Ω–∫—Ç:</label>
<input type="text" id="district" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –°–µ—Å—Ç—Ä–æ—Ä–µ—Ü–∫, –ü–∞—Ä–≥–æ–ª–æ–≤–æ, –í—Å–µ–≤–æ–ª–æ–∂—Å–∫" list="districtList" />
<datalist id="districtList">
<option value="–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π"></option>
<option value="–°–µ—Å—Ç—Ä–æ—Ä–µ—Ü–∫"></option>
<option value="–ü–∞—Ä–≥–æ–ª–æ–≤–æ"></option>
<option value="–í—ã–±–æ—Ä–≥—Å–∫–∏–π"></option>
<option value="–í—Å–µ–≤–æ–ª–æ–∂—Å–∫"></option>
<option value="–ö–æ–º–∞—Ä–æ–≤–æ"></option>
<option value="–ó–µ–ª–µ–Ω–æ–≥–æ—Ä—Å–∫"></option>
<option value="–ö—É–¥—Ä–æ–≤–æ"></option>
<option value="–ü—É—à–∫–∏–Ω"></option>
<option value="–ü–∞–≤–ª–æ–≤—Å–∫"></option>
<option value="–°–µ—Ä—Ç–æ–ª–æ–≤–æ"></option>
<option value="–ú—É—Ä–∏–Ω–æ"></option>
<option value="–î—Ä–∞–Ω–∏—à–Ω–∏–∫–∏"></option>
</datalist>
<div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:8px;">
<button class="btn" id="askDistrict" type="button">–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</button>
<button class="btn secondary" id="clearDistrict" type="button">–û—á–∏—Å—Ç–∏—Ç—å</button>
</div>
<div id="districtInfo" style="margin-top:12px;" aria-live="polite"></div>
<!-- –û–Ω–ª–∞–π–Ω-–∫–∞—Ä—Ç–∞ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ä–∞–π–æ–Ω—É -->
<div id="districtMapWrap" style="margin-top:12px;">
<iframe id="districtMap" class="map-embed" src="https://www.google.com/maps?q=Saint%20Petersburg&output=embed" loading="lazy" title="–ö–∞—Ä—Ç–∞ —Ä–∞–π–æ–Ω–æ–≤ ‚Äî –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ –∏ –õ–û" referrerpolicy="no-referrer-when-downgrade"></iframe>
</div>
</section>
<section id="contact" class="fade-in">
<h2>–°–≤—è–∑–∞—Ç—å—Å—è –ø–æ email</h2>
<form id="emailForm" aria-label="–§–æ—Ä–º–∞ —Å–≤—è–∑–∏">
<input type="text" name="honeypot" aria-hidden="true" tabindex="-1" class="sr-only" autocomplete="off" />
<label for="name">–í–∞—à–µ –∏–º—è</label>
<input type="text" id="name" name="name" placeholder="–ò–≤–∞–Ω" required autocomplete="name" />
<label for="email">–í–∞—à email</label>
<input type="email" id="email" name="email" placeholder="name@example.com" required autocomplete="email" />
<label for="message">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
<textarea id="message" name="message" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, –∫–∞–∫–æ–π –¥–æ–º –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ" required></textarea>
<label for="preferredTime">–£–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∑–≤–æ–Ω–∫–∞</label>
<input type="text" id="preferredTime" name="preferredTime" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≤—Ç—Ä–∞ —Å 12:00 –¥–æ 16:00" autocomplete="off" />
<input type="submit" value="–û—Ç–∫—Ä—ã—Ç—å –ø–∏—Å—å–º–æ –≤ –ø–æ—á—Ç–æ–≤–æ–º –∫–ª–∏–µ–Ω—Ç–µ" class="submit" />
</form>
<p id="contactStatus" class="subtle" role="status" aria-live="polite"></p>
<div style="margin-top:8px;">
<a class="btn secondary" href="mailto:info@domveka.ru">–ù–∞–ø–∏—Å–∞—Ç—å –Ω–∞ info@domveka.ru</a>
</div>
</section>
<div class="sticky-cta">
<a href="#contact" class="btn">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</a>
<a href="mailto:info@domveka.ru" class="btn secondary">–ù–∞–ø–∏—Å–∞—Ç—å –Ω–∞ email</a>
</div>
<footer>
&copy; <span id="year"></span> Dom Veka. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. |
<a href="mailto:info@domveka.ru">info@domveka.ru</a> |
<a href="tel:+78121234567">+7 (812) 123-45-67</a>
</footer>
<button id="backToTop" aria-label="–ù–∞–≤–µ—Ä—Ö" title="–ù–∞–≤–µ—Ä—Ö">‚¨Ü</button>
<div id="toast" class="toast" role="status" aria-live="polite"></div>
<!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–ª–Ω–æ—Ä–∞–∑–º–µ—Ä–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
<div id="modalImg" role="dialog" aria-modal="true" aria-hidden="true" aria-label="–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
<button id="modalImg__close" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
<button id="modalImg__prev" type="button" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ">‚Äπ</button>
<button id="modalImg__next" type="button" aria-label="–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ">‚Ä∫</button>
<div id="modalImg__idx" aria-live="polite">‚Äî</div>
<img id="modalImg__img" alt="">
</div>
<script>
// JS –≤–∫–ª—é—á—ë–Ω
document.documentElement.classList.add('js');

/* –£—Ç–∏–ª–∏—Ç—ã */
const fmt = new Intl.NumberFormat("ru-RU");
const fmtCurrency = (n) => (n || n === 0) ? fmt.format(Math.round(n)) + " ‚ÇΩ" : "‚Äî";
const qs = (sel, el=document) => el.querySelector(sel);
const qsa = (sel, el=document) => Array.from(el.querySelectorAll(sel));
const saveLS = (k,v)=>{ try{ localStorage.setItem(k, JSON.stringify(v)); }catch{} };
const readLS = (k,def=null)=>{ try{ const v=localStorage.getItem(k); return v?JSON.parse(v):def; }catch{ return def; } };
function toast(msg){ const el=qs("#toast"); if(!el) return; el.textContent=msg; el.classList.add("show"); clearTimeout(el._t); el._t=setTimeout(()=>el.classList.remove("show"),2200); }

/* –î–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ (–∫–∞–∫ –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–µ) */
const PROJECTS = [
  { id:"p1", name:"46", type:"–ö–∏—Ä–ø–∏—á–Ω—ã–π", area:250, energy:"A+", bedrooms:4, baths:3, lot:12, basePricePerM2:150000, images:["house1.jpg","house1_2.jpg","house1_3.jpg"], image:"house1.jpg", location:"–í—Å–µ–≤–æ–ª–æ–∂—Å–∫–∏–π —Ä–∞–π–æ–Ω" },
  { id:"p2", name:"–õ–æ—Ñ—Ç 180", type:"–ì–∞–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π", area:180, energy:"A", bedrooms:3, baths:2, lot:10, basePricePerM2:120000, images:["house2.jpg","house2_2.jpg","house2_3.jpg"], image:"house2.jpg", location:"–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π —Ä–∞–π–æ–Ω" }
];

/* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä */
const progress = qs('#progress');
function updateProgress(){
  const scrollTop = window.scrollY || document.documentElement.scrollTop;
  const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
  const p = height ? (scrollTop / height) : 0;
  if(progress) progress.style.transform = "scaleX(" + p + ")";
}
window.addEventListener('scroll', updateProgress, { passive:true });
window.addEventListener('resize', updateProgress);
updateProgress();

/* –ü–æ—è–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–π */
(function revealOnScroll(){
  const items = qsa('.fade-in');
  if('IntersectionObserver' in window){
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){ e.target.classList.add('anim-shown'); io.unobserve(e.target); }
      });
    }, { threshold:0.15 });
    items.forEach(el=>io.observe(el));
  }else{ items.forEach(el=>el.classList.add('anim-shown')); }
})();

/* –ê–≤—Ç–æ—Å–∫—Ä—ã—Ç–∏–µ –Ω–∞–≤–±–∞—Ä–∞ */
(function navAutoHide(){
  const nav = qs('#mainNav'); if(!nav) return;
  let lastY = window.scrollY;
  window.addEventListener('scroll', ()=>{
    const y = window.scrollY;
    if(y > lastY && y > 80) nav.classList.add('nav-hidden'); else nav.classList.remove('nav-hidden');
    lastY = y;
  }, { passive:true });
})();

/* –¢–µ–º–∞ */
(function initTheme(){
  const btn = qs("#themeToggle");
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  const saved = readLS("theme");
  const initial = (saved === "dark" || saved === "light") ? saved : (prefersDark ? "dark" : "light");
  setTheme(initial);
  if(btn){
    btn.addEventListener("click", ()=>{
      const current = document.documentElement.getAttribute("data-theme") || (prefersDark ? "dark" : "light");
      const next = current === "dark" ? "light" : "dark";
      setTheme(next);
      toast(next === "dark" ? "–¢—ë–º–Ω–∞—è —Ç–µ–º–∞" : "–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞");
    });
  }
  function setTheme(theme){
    document.documentElement.setAttribute("data-theme", theme);
    document.body.style.colorScheme = theme;
    saveLS("theme", theme);
    const dark = theme === "dark";
    if(btn){
      btn.setAttribute("aria-pressed", String(dark));
      btn.textContent = dark ? "‚òÄÔ∏è –¢–µ–º–∞" : "üåô –¢–µ–º–∞";
    }
    const meta = qs('#dynamic-theme-color');
    if(meta){
      const color = getComputedStyle(document.documentElement).getPropertyValue('--theme-color').trim() || (theme === "dark" ? "#0b1220" : "#f8fafc");
      meta.setAttribute('content', color);
    }
  }
})();

/* –ì–æ–¥ –≤ —Ñ—É—Ç–µ—Ä–µ */
const yearEl = qs("#year");
if(yearEl) yearEl.textContent = new Date().getFullYear();

/* –¶–µ–Ω—ã –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö */
function initProjectPrices(){
  PROJECTS.forEach(p=>{
    const price = p.area * p.basePricePerM2;
    const el = document.querySelector(`[data-price="${p.id}"]`);
    if(el) el.textContent = fmtCurrency(price);
  });
}
initProjectPrices();

/* –ö–∞—Ä—É—Å–µ–ª—å –∫–∞—Ä—Ç–æ—á–µ–∫: —Ä—É—á–Ω–æ–µ –ª–∏—Å—Ç–∞–Ω–∏–µ + —Å–≤–∞–π–ø/–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–ê–í–¢–û-–ü–†–û–õ–ò–°–¢–´–í–ê–ù–ò–ï –£–ë–†–ê–ù–û) */
(function initCardGalleries(){
  qsa('.card').forEach(card=>{
    const wrap = qs('.card-img-wrap', card);
    const img = wrap?.querySelector('img.card-img');
    const link = wrap?.querySelector('.img-preview');
    const btnPrev = wrap?.querySelector('.card-prev');
    const btnNext = wrap?.querySelector('.card-next');
    const idxBadge = wrap?.querySelector('.card-idx');
    const imgs = (card.getAttribute('data-images')||"").split(',').map(s=>s.trim()).filter(Boolean);
    if(!wrap || !img || imgs.length < 1) return;

    let idx = 0;
    function render(){
      img.src = imgs[idx];
      if(link) link.setAttribute('href', imgs[idx]);
      if(idxBadge) idxBadge.textContent = `${idx+1}/${imgs.length}`;
    }
    function next(){ idx = (idx + 1) % imgs.length; render(); }
    function prev(){ idx = (idx - 1 + imgs.length) % imgs.length; render(); }

    // –†—É—á–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
    btnPrev?.addEventListener('click', (e)=>{ e.stopPropagation(); prev(); });
    btnNext?.addEventListener('click', (e)=>{ e.stopPropagation(); next(); });

    // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–∫–æ–≥–¥–∞ —Ñ–æ–∫—É—Å –Ω–∞ –æ–±—ë—Ä—Ç–∫–µ)
    wrap.addEventListener('keydown', (e)=>{
      if(e.key === 'ArrowLeft'){ e.preventDefault(); prev(); }
      if(e.key === 'ArrowRight'){ e.preventDefault(); next(); }
      if(e.key === 'Enter'){ const href = link?.getAttribute('href') || img.src; if(href){ e.preventDefault(); openModalImage(href, imgs, idx); } }
    });

    // –°–≤–∞–π–ø (—Ç–∞—á/–º—ã—à—å)
    let startX = 0, swiping = false;
    wrap.addEventListener('pointerdown', (e)=>{ swiping = true; startX = e.clientX; });
    wrap.addEventListener('pointerup', (e)=>{
      if(!swiping) return; const dx = e.clientX - startX;
      if(Math.abs(dx) > 30){ if(dx < 0) next(); else prev(); }
      swiping = false;
    });

    // –ö–ª–∏–∫ –ø–æ –ø—Ä–µ–≤—å—é ‚Äî –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏ —Å –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π
    link?.addEventListener('click', (e)=>{
      e.preventDefault();
      const href = link.getAttribute('href') || img.src;
      openModalImage(href, imgs, idx);
    });

    render(); // –Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä
  });
})();

/* –®–µ—Ä–∏–Ω–≥ */
function shareProject(p){
  const price = fmtCurrency(p.area * p.basePricePerM2);
  const text = `${p.name} ‚Äî ${p.type}, ${p.area} –º¬≤, ${p.bedrooms} —Å–ø–∞–ª—å–Ω–∏. –ë—é–¥–∂–µ—Ç –æ—Ç ${price}. –õ–æ–∫–∞—Ü–∏—è: ${p.location}.`;
  const url = location.href.split('#')[0] + '#gallery';
  if(navigator.share){
    navigator.share({ title:p.name, text, url }).catch(()=>{});
  }else if(navigator.clipboard){
    navigator.clipboard.writeText(`${text}\n${url}`).then(()=>toast("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")).catch(()=>{
      location.href = `mailto:?subject=${encodeURIComponent(p.name)}&body=${encodeURIComponent(text+'\n'+url)}`;
    });
  }else{
    location.href = `mailto:?subject=${encodeURIComponent(p.name)}&body=${encodeURIComponent(text+'\n'+url)}`;
  }
}
qsa('[data-share]').forEach(btn=>{
  btn.addEventListener('click',(e)=>{
    const id = e.currentTarget.getAttribute('data-share');
    const p = PROJECTS.find(x=>x.id===id);
    if(p) shareProject(p);
  });
});

/* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è */
function generateDescription(p){
  const style = p.type==="–ö–∏—Ä–ø–∏—á–Ω—ã–π" ? "–µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–π –º–∏–Ω–∏–º–∞–ª–∏–∑–º" : p.type==="–ì–∞–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π" ? "—Å–∫–∞–Ω–¥–∏‚Äë–º–∏–Ω–∏–º–∞–ª–∏–∑–º" : "—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏–∫–∞";
  const energy = p.energy==="A+" ? "–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å –Ω–∏–∑–∫–∏–º–∏ –∑–∞—Ç—Ä–∞—Ç–∞–º–∏" : p.energy==="A" ? "—ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∏ —Ç—ë–ø–ª—ã–π" : "—Å –±–∞–∑–æ–≤–æ–π —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é";
  const commute = /–ü—Ä–∏–º–æ—Ä|–õ–∞—Ö—Ç–∞|–ö—É—Ä–æ—Ä—Ç|–°–µ—Å—Ç—Ä–æ—Ä–µ—Ü–∫|–õ–∏—Å–∏–π –ù–æ—Å|–ü–∞—Ä–≥–æ–ª–æ–≤–æ|–ü–∞—Ä–Ω–∞—Å/.test(p.location) ? "15‚Äì30 –º–∏–Ω—É—Ç –¥–æ —Ü–µ–Ω—Ç—Ä–∞" : "30‚Äì50 –º–∏–Ω—É—Ç –¥–æ —Ü–µ–Ω—Ç—Ä–∞";
  const lotText = p.lot ? `–£—á–∞—Å—Ç–æ–∫ ${p.lot} —Å–æ—Ç–æ–∫ ‚Äî –º–µ—Å—Ç–æ –¥–ª—è —Å–∞–¥–∞ –∏ –±–∞—Ä–±–µ–∫—é.` : "";
  const price = fmtCurrency(p.area * p.basePricePerM2);
  const hooks = ["–ø–∞–Ω–æ—Ä–∞–º–Ω–æ–µ –æ—Å—Ç–µ–∫–ª–µ–Ω–∏–µ","–≤—ã—Å–æ–∫–∏–µ –ø–æ—Ç–æ–ª–∫–∏","–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Å—Ç–µ–Ω","—Ç—ë–ø–ª—ã–π –ø–æ–ª","–≤–µ–Ω—Ç—Ñ–∞—Å–∞–¥"];
  const hook = hooks[p.area % hooks.length];
  return `${p.name}: ${p.type.toLowerCase()}, ${p.area} –º¬≤, ${p.bedrooms} —Å–ø–∞–ª—å–Ω–∏. –°—Ç–∏–ª—å ‚Äî ${style}, –∫–ª–∞—Å—Å ${p.energy} (${energy}). ${lotText} –õ–æ–∫–∞—Ü–∏—è: ${p.location} (${commute}). –ë—é–¥–∂–µ—Ç –æ—Ç ${price}. –ê–∫—Ü–µ–Ω—Ç: ${hook}.`;
}
qsa('[data-gen]').forEach(btn=>{
  btn.addEventListener('click', (e)=>{
    const id = e.currentTarget.getAttribute('data-gen');
    const p = PROJECTS.find(x=>x.id===id);
    const el = qs(`#desc-${id}`);
    if(p && el){ el.textContent = generateDescription(p); }
  });
});

/* –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ (–¥–æ 2 —à—Ç—É–∫) */
const compareSet = new Set();
function updateCompareUI(){
  const section = qs('#compare');
  const hint = qs('#compareHint');
  const wrap = qs('#compareTableWrap');
  if(compareSet.size === 0){
    section.hidden = true; wrap.innerHTML = ""; hint.textContent = "–í—ã–±–µ—Ä–∏—Ç–µ –¥–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è";
    return;
  }
  section.hidden = false;
  if(compareSet.size === 1){
    hint.textContent = "–í—ã–±–µ—Ä–∏—Ç–µ –µ—â—ë –æ–¥–∏–Ω –ø—Ä–æ–µ–∫—Ç –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è";
    wrap.innerHTML = "";
    return;
  }
  hint.textContent = "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ";
  const ids = Array.from(compareSet);
  const a = PROJECTS.find(p=>p.id===ids[0]);
  const b = PROJECTS.find(p=>p.id===ids[1]);
  const rows = [
    ["–ü—Ä–æ–µ–∫—Ç", a?.name, b?.name],
    ["–¢–∏–ø", a?.type, b?.type],
    ["–ü–ª–æ—â–∞–¥—å", a?.area+" –º¬≤", b?.area+" –º¬≤"],
    ["–≠–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å", a?.energy, b?.energy],
    ["–°–ø–∞–ª—å–Ω–∏", a?.bedrooms, b?.bedrooms],
    ["–°–∞–Ω—É–∑–ª—ã", a?.baths, b?.baths],
    ["–£—á–∞—Å—Ç–æ–∫", (a?.lot||"‚Äî")+" —Å–æ—Ç.", (b?.lot||"‚Äî")+" —Å–æ—Ç."],
    ["–¶–µ–Ω–∞ –∑–∞ –º¬≤", fmtCurrency(a?.basePricePerM2), fmtCurrency(b?.basePricePerM2)],
    ["–û—Ü–µ–Ω–∫–∞ –±—é–¥–∂–µ—Ç–∞", fmtCurrency(a?.area*a?.basePricePerM2), fmtCurrency(b?.area*b?.basePricePerM2)],
    ["–õ–æ–∫–∞—Ü–∏—è", a?.location, b?.location],
  ];
  let html = '<table class="compare-table"><thead><tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>'+a.name+'</th><th>'+b.name+'</th></tr></thead><tbody>';
  rows.forEach(r=>{
    html += `<tr><th>${r[0]}</th><td>${r[1]}</td><td>${r[2]}</td></tr>`;
  });
  html += '</tbody></table>';
  wrap.innerHTML = html;
}
qsa('.compareCheck').forEach(ch=>{
  ch.addEventListener('change', (e)=>{
    const id = e.currentTarget.getAttribute('data-id');
    if(e.currentTarget.checked){
      if(compareSet.size >= 2){
        e.currentTarget.checked = false;
        toast("–ú–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å –Ω–µ –±–æ–ª–µ–µ 2 –ø—Ä–æ–µ–∫—Ç–æ–≤");
        return;
      }
      compareSet.add(id);
    }else{
      compareSet.delete(id);
    }
    updateCompareUI();
  });
});
qs('#clearCompare')?.addEventListener('click', ()=>{
  compareSet.clear();
  qsa('.compareCheck').forEach(ch=>ch.checked = false);
  updateCompareUI();
});

/* –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (–∫–∞–∫ –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–µ) */
const areaEl = qs('#area');
const typeEl = qs('#type');
const finishEl = qs('#finish');
const energyEl = qs('#energy');
const priceEl = qs('#price');
const useForMortgageBtn = qs('#usePriceForMortgage');
const copyEstimateBtn = qs('#copyEstimate');
function calcEstimate(){
  const area = Number(areaEl.value);
  const typeOpt = typeEl.selectedOptions[0];
  const finishOpt = finishEl.selectedOptions[0];
  const energyOpt = energyEl.selectedOptions[0];
  if(!area || area < 50){ priceEl.textContent = "–°—Ç–æ–∏–º–æ—Å—Ç—å: ‚Äî"; useForMortgageBtn.disabled = true; copyEstimateBtn.disabled = true; return null; }
  const base = Number(typeOpt.dataset.price || 0);
  const mFinish = Number(finishOpt.dataset.mult || 1);
  const mEnergy = Number(energyOpt.dataset.mult || 1);
  const total = area * base * mFinish * mEnergy;
  priceEl.textContent = "–°—Ç–æ–∏–º–æ—Å—Ç—å: " + fmtCurrency(total);
  useForMortgageBtn.disabled = false;
  copyEstimateBtn.disabled = false;
  return { area, base, mFinish, mEnergy, total };
}
['input','change'].forEach(ev=>{
  areaEl.addEventListener(ev, calcEstimate);
  typeEl.addEventListener(ev, ()=>{ calcEstimate(); renderPriceChart(); });
  finishEl.addEventListener(ev, calcEstimate);
  energyEl.addEventListener(ev, calcEstimate);
});
calcEstimate();

/* –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—á—ë—Ç–∞ */
copyEstimateBtn?.addEventListener('click', ()=>{
  const res = calcEstimate();
  if(!res) return;
  const text = `–û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ–º–∞:
–ü–ª–æ—â–∞–¥—å: ${res.area} –º¬≤
–ë–∞–∑–∞: ${fmtCurrency(res.base)}/–º¬≤
–§–∏–Ω–∏—à: √ó${res.mFinish}
–≠–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: √ó${res.mEnergy}
–ò—Ç–æ–≥–æ: ${fmtCurrency(res.total)}`;
  if(navigator.clipboard){
    navigator.clipboard.writeText(text).then(()=>toast("–†–∞—Å—á—ë—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")).catch(()=>toast("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å"));
  }else{
    toast("–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–µ —É–¥–∞–ª–æ—Å—å");
  }
});

/* –ú–∏–Ω–∏‚Äë–¥–∏–∞–≥—Ä–∞–º–º–∞ —Ü–µ–Ω –∑–∞ –º¬≤ */
function renderPriceChart(){
  const wrap = qs('#priceChart');
  if(!wrap) return;
  const brick = Number(qs('#type option[value="brick"]')?.dataset.price || 150000);
  const aac = Number(qs('#type option[value="aac"]')?.dataset.price || 120000);
  const max = Math.max(brick, aac) || 1;
  const bar = (label, value, color) => `
<div style="margin:8px 0;">
  <div style="display:flex;justify-content:space-between;align-items:baseline;">
    <strong>${label}</strong><span class="subtle">${fmtCurrency(value)} / –º¬≤</span>
  </div>
  <div style="height:10px;background:var(--border);border-radius:999px;overflow:hidden;">
    <div style="height:10px;width:${(value/max)*100}%;background:${color};border-radius:999px;"></div>
  </div>
</div>`;
  wrap.innerHTML = bar("–ö–∏—Ä–ø–∏—á–Ω—ã–π", brick, "var(--accent)") + bar("–ì–∞–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π", aac, "color-mix(in srgb, var(--accent) 60%, #10b981 40%)");
}
renderPriceChart();

/* –ò–ø–æ—Ç–µ—á–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä */
const homePriceEl = qs('#homePrice');
const downEl = qs('#downPayment');
const rateEl = qs('#rate');
const yearsEl = qs('#years');
const resultEl = qs('#mortgageResult');
const refreshKeyBtn = qs('#refreshKeyRate');
const keyRateStatus = qs('#keyRateStatus');
function calcMortgage(){
  const price = Number(homePriceEl.value);
  const down = Number(downEl.value) || 0;
  const rate = Number(rateEl.value);
  const years = Number(yearsEl.value);
  if(!price || !rate || !years || price <= 0 || years <= 0){
    resultEl.textContent = "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è";
    return;
  }
  const loan = price - down;
  if(loan <= 0){
    resultEl.textContent = "–°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ 0";
    return;
  }
  const r = rate / 100 / 12;
  const n = years * 12;
  const k = (r === 0) ? (1/n) : (r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
  const payment = loan * k;
  const totalPay = payment * n;
  const overpay = totalPay - loan;
  resultEl.textContent = `–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç—ë–∂: ${fmtCurrency(payment)} ‚Ä¢ –ü–µ—Ä–µ–ø–ª–∞—Ç–∞: ${fmtCurrency(overpay)}`;
}
qs('#calcMortgage')?.addEventListener('click', calcMortgage);

/* –ü–µ—Ä–µ–¥–∞—á–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –≤ –∏–ø–æ—Ç–µ–∫—É */
qs('#usePriceForMortgage')?.addEventListener('click', ()=>{
  const res = calcEstimate();
  if(!res) return;
  homePriceEl.value = Math.round(res.total);
  toast("–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–∞ –≤ –∏–ø–æ—Ç–µ—á–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä");
  location.hash = "#mortgage";
});

/* –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ (–∑–∞–≥–ª—É—à–∫–∞) */
refreshKeyBtn?.addEventListener('click', ()=>{
  const sample = 15.0; // –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –æ—Ñ–ª–∞–π–Ω-–∑–∞–≥–ª—É—à–∫–∏
  rateEl.value = sample;
  keyRateStatus.textContent = `–°—Ç–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (–ø—Ä–∏–º–µ—Ä: ${sample}%)`;
  toast("–°—Ç–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞");
});

/* Back-to-top */
(function backToTop(){
  const btn = qs('#backToTop');
  if(!btn) return;
  const toggle = ()=>{ btn.classList.toggle('show', window.scrollY > 400); };
  window.addEventListener('scroll', toggle, { passive:true });
  toggle();
  btn.addEventListener('click', ()=>window.scrollTo({ top:0, behavior:'smooth' }));
})();

/* Email —Ñ–æ—Ä–º–∞ (mailto) */
qs('#emailForm')?.addEventListener('submit', (e)=>{
  e.preventDefault();
  const form = e.currentTarget;
  const hp = form.querySelector('[name="honeypot"]')?.value || "";
  if(hp){ return; } // –∞–Ω—Ç–∏–±–æ—Ç
  const name = form.name.value?.trim() || "–ë–µ–∑ –∏–º–µ–Ω–∏";
  const email = form.email.value?.trim() || "";
  const message = form.message.value?.trim() || "";
  const time = form.preferredTime.value?.trim() || "";
  const subject = `Dom Veka: –∑–∞—è–≤–∫–∞ –æ—Ç ${name}`;
  const body = [
    `–ò–º—è: ${name}`,
    `Email: ${email}`,
    time ? `–£–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è: ${time}` : "",
    "",
    "–°–æ–æ–±—â–µ–Ω–∏–µ:",
    message
  ].filter(Boolean).join("\n");
  const link = `mailto:info@domveka.ru?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
  qs('#contactStatus').textContent = "–û—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ—á—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç —Å –≥–æ—Ç–æ–≤—ã–º –ø–∏—Å—å–º–æ–º‚Ä¶";
  location.href = link;
});

/* –ò–Ω—Ñ–æ –ø–æ —Ä–∞–π–æ–Ω–∞–º + –æ–Ω–ª–∞–π–Ω‚Äë–∫–∞—Ä—Ç–∞ (—Ä–∞—Å—à–∏—Ä–µ–Ω–æ) */
const DISTRICTS = {
  "–ø—Ä–∏–º–æ—Ä—Å–∫–∏–π": {
    title: "–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π —Ä–∞–π–æ–Ω",
    info: "–°–µ–≤–µ—Ä –°–ü–±: –º–µ—Ç—Ä–æ, –≤—ã–µ–∑–¥—ã –Ω–∞ –ó–°–î/–ö–ê–î, –ø–∞—Ä–∫–∏ –∏ –Ω–∞–±–µ—Ä–µ–∂–Ω—ã–µ. –†–∞–∑–≤–∏—Ç–∞—è —Å—Ä–µ–¥–∞, –≤—ã—Å–æ–∫–∏–π —Å–ø—Ä–æ—Å –Ω–∞ –ò–ñ–°, —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—á–∞—Å—Ç–∫–æ–≤ —Å—Ä–µ–¥–Ω—è—è –∏ –≤—ã—à–µ.",
    mapQuery: "–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π —Ä–∞–π–æ–Ω, –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥"
  },
  "—Å–µ—Å—Ç—Ä–æ—Ä–µ—Ü–∫": {
    title: "–°–µ—Å—Ç—Ä–æ—Ä–µ—Ü–∫",
    info: "–ö—É—Ä–æ—Ä—Ç–Ω–∞—è –∑–æ–Ω–∞ —É –§–∏–Ω—Å–∫–æ–≥–æ –∑–∞–ª–∏–≤–∞: —Å–æ—Å–Ω—ã, –ø–ª—è–∂–∏, —á–∏—Å—Ç—ã–π –≤–æ–∑–¥—É—Ö. –í –æ—Å–Ω–æ–≤–Ω–æ–º –ò–ñ–° –∏ –¥–∞—á–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞, –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ –¥–ª—è –ü–ú–ñ –∏ –¥–∞—á–∏.",
    mapQuery: "–°–µ—Å—Ç—Ä–æ—Ä–µ—Ü–∫"
  },
  "–ø–∞—Ä–≥–æ–ª–æ–≤–æ": {
    title: "–ü–∞—Ä–≥–æ–ª–æ–≤–æ",
    info: "–ë–ª–∏–∑–æ—Å—Ç—å –∫ –ö–ê–î/–ó–°–î –∏ –ª–µ—Å–∞–º, —Å–º–µ—à–∞–Ω–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞. –£–¥–æ–±–Ω–∞—è –ª–æ–≥–∏—Å—Ç–∏–∫–∞ –Ω–∞ —Å–µ–≤–µ—Ä –°–ü–±, —Ä—è–¥–æ–º –¢–¶, —à–∫–æ–ª—ã, —Å–∞–¥–∏–∫–∏.",
    mapQuery: "–ü–∞—Ä–≥–æ–ª–æ–≤–æ"
  },
  "–≤—ã–±–æ—Ä–≥—Å–∫–∏–π": {
    title: "–í—ã–±–æ—Ä–≥—Å–∫–∏–π —Ä–∞–π–æ–Ω",
    info: "–ë–∞–ª–∞–Ω—Å –ø—Ä–∏—Ä–æ–¥—ã –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω –ø–æ–¥ –ò–ñ–°. –£–¥–æ–±–Ω—ã–µ –≤—ã–µ–∑–¥—ã, —Ä–∞–∑–≤–∏—Ç—ã–µ —Ä–∞–π–æ–Ω—ã, –ø–∞—Ä–∫–∏.",
    mapQuery: "–í—ã–±–æ—Ä–≥—Å–∫–∏–π —Ä–∞–π–æ–Ω, –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥"
  },
  "–≤—Å–µ–≤–æ–ª–æ–∂—Å–∫": {
    title: "–í—Å–µ–≤–æ–ª–æ–∂—Å–∫",
    info: "–ì–æ—Ä–æ–¥-—Å–ø—É—Ç–Ω–∏–∫: –∑–µ–ª—ë–Ω—ã–µ –∑–æ–Ω—ã, –∫–æ—Ç—Ç–µ–¥–∂–Ω—ã–µ –ø–æ—Å—ë–ª–∫–∏, –∂–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ö–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è –ü–ú–ñ.",
    mapQuery: "–í—Å–µ–≤–æ–ª–æ–∂—Å–∫"
  },
  "–∫–æ–º–∞—Ä–æ–≤–æ": {
    title: "–ö–æ–º–∞—Ä–æ–≤–æ",
    info: "–°—Ç–∞—Ç—É—Å–Ω–∞—è –¥–∞—á–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è —É –∑–∞–ª–∏–≤–∞: —Å–æ—Å–Ω–æ–≤—ã–µ –ª–µ—Å–∞, —Ç–∏—à–∏–Ω–∞. –í—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–µ–º–ª–∏, –∫–∞–º–µ—Ä–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞.",
    mapQuery: "–ö–æ–º–∞—Ä–æ–≤–æ"
  },
  "–∑–µ–ª–µ–Ω–æ–≥–æ—Ä—Å–∫": {
    title: "–ó–µ–ª–µ–Ω–æ–≥–æ—Ä—Å–∫",
    info: "–ö—É—Ä–æ—Ä—Ç–Ω—ã–π –≥–æ—Ä–æ–¥ –Ω–∞ –±–µ—Ä–µ–≥—É: –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø–ª—è–∂–∏, –∫–ª–∏–º–∞—Ç. –£–¥–æ–±–µ–Ω –¥–ª—è –∫—Ä—É–≥–ª–æ–≥–æ–¥–∏—á–Ω–æ–π –∂–∏–∑–Ω–∏ –∏ –æ—Ç–¥—ã—Ö–∞.",
    mapQuery: "–ó–µ–ª–µ–Ω–æ–≥–æ—Ä—Å–∫"
  },
  "–∫—É–¥—Ä–æ–≤–æ": {
    title: "–ö—É–¥—Ä–æ–≤–æ",
    info: "–ü–ª–æ—Ç–Ω–∞—è –≥–æ—Ä–æ–¥—Å–∫–∞—è —Å—Ä–µ–¥–∞ —É –º–µ—Ç—Ä–æ. –ü—Ä–∞–∫—Ç–∏—á–Ω–æ –∫–∞–∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∂–∏–ª—å—ë –Ω–∞ –ø–µ—Ä–∏–æ–¥ —Å—Ç—Ä–æ–π–∫–∏; —Ä—è–¥–æ–º –¢–¶ –∏ —Å–µ—Ä–≤–∏—Å—ã.",
    mapQuery: "–ö—É–¥—Ä–æ–≤–æ"
  },
  "–ø—É—à–∫–∏–Ω": {
    title: "–ü—É—à–∫–∏–Ω",
    info: "–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è —Å—Ä–µ–¥–∞, –ø–∞—Ä–∫–∏ –∏ –¥–≤–æ—Ä—Ü—ã, —Å–ø–æ–∫–æ–π–Ω—ã–π —Ç–µ–º–ø. –£–¥–æ–±–Ω—ã–π –≤—ã–µ–∑–¥ –∫ –ö–ê–î –∏ –∞—ç—Ä–æ–ø–æ—Ä—Ç—É.",
    mapQuery: "–ü—É—à–∫–∏–Ω"
  },
  "–ø–∞–≤–ª–æ–≤—Å–∫": {
    title: "–ü–∞–≤–ª–æ–≤—Å–∫",
    info: "–¢–∏—Ö–∏–π –ø—Ä–∏–≥–æ—Ä–æ–¥, –º–∞–ª–æ—ç—Ç–∞–∂–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞, –ø–∞—Ä–∫. –ü–æ–ø—É–ª—è—Ä–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è –¥–ª—è —á–∞—Å—Ç–Ω—ã—Ö –¥–æ–º–æ–≤.",
    mapQuery: "–ü–∞–≤–ª–æ–≤—Å–∫"
  },
  "—Å–µ—Ä—Ç–æ–ª–æ–≤–æ": {
    title: "–°–µ—Ä—Ç–æ–ª–æ–≤–æ",
    info: "–°–µ–≤–µ—Ä –°–ü–±: —Ä–∞–∑–≤–∏–≤–∞—é—â–∞—è—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ª–µ—Å–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã, –±—ã—Å—Ç—Ä—ã–π –≤—ã–µ–∑–¥ –Ω–∞ –ö–ê–î. –î–æ—Å—Ç—É–ø–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏.",
    mapQuery: "–°–µ—Ä—Ç–æ–ª–æ–≤–æ"
  },
  "–º—É—Ä–∏–Ω–æ": {
    title: "–ú—É—Ä–∏–Ω–æ",
    info: "–ë–ª–∏–∑–∫–æ –∫ –º–µ—Ç—Ä–æ, –≤—ã—Å–æ–∫–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å. –ü–æ–¥—Ö–æ–¥–∏—Ç –∫–∞–∫ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –±–∞–∑–∞ –Ω–∞ –≤—Ä–µ–º—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –¥–æ–º–∞.",
    mapQuery: "–ú—É—Ä–∏–Ω–æ"
  },
  "–¥—Ä–∞–Ω–∏—à–Ω–∏–∫–∏": {
    title: "–î—Ä–∞–Ω–∏—à–Ω–∏–∫–∏",
    info: "–ü–æ—Å—ë–ª–æ–∫ –≤–æ –í—Å–µ–≤–æ–ª–æ–∂—Å–∫–æ–º —Ä–∞–π–æ–Ω–µ: —Ç–∏—Ö–æ, –º–∞–ª–æ—ç—Ç–∞–∂–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞, —É—á–∞—Å—Ç–∫–∏ –ø–æ–¥ –ò–ñ–°. –£—Ç–æ—á–Ω—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π (—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ, –≥–∞–∑, –≤–æ–¥–∞) –∏ –ø–æ–¥—ä–µ–∑–¥.",
    mapQuery: "–î—Ä–∞–Ω–∏—à–Ω–∏–∫–∏ –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å"
  }
};
function districtFallback(name){
  const base = (name || "–í—ã–±—Ä–∞–Ω–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è");
  return {
    title: base,
    info: `${base}: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥—ä–µ–∑–¥, —Å—Ç–∞—Ç—É—Å—ã –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π (—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ, –≥–∞–∑, –≤–æ–¥–∞), —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ö–ê–î/–º–µ—Ç—Ä–æ –∏ —Å–æ—Å—Ç–∞–≤ –≥—Ä—É–Ω—Ç–æ–≤.`,
    mapQuery: `${base} –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å`
  };
}
qs('#askDistrict')?.addEventListener('click', ()=>{
  const input = (qs('#district').value || "").trim();
  const key = input.toLowerCase();
  const box = qs('#districtInfo');
  const map = qs('#districtMap');
  if(!input){ box.textContent = "–í–≤–µ–¥–∏—Ç–µ —Ä–∞–π–æ–Ω –∏–ª–∏ –Ω–∞—Å–µ–ª—ë–Ω–Ω—ã–π –ø—É–Ω–∫—Ç."; return; }
  const data = DISTRICTS[key] || districtFallback(input);
  box.innerHTML = `<strong>${data.title}.</strong> ${data.info}`;
  if(map){
    const q = encodeURIComponent(data.mapQuery);
    map.src = `https://www.google.com/maps?q=${q}&output=embed`;
    map.title = `–ö–∞—Ä—Ç–∞ ‚Äî ${data.title}`;
  }
});
qs('#clearDistrict')?.addEventListener('click', ()=>{
  qs('#district').value = "";
  qs('#districtInfo').textContent = "";
  const map = qs('#districtMap');
  if(map){
    map.src = "https://www.google.com/maps?q=Saint%20Petersburg&output=embed";
    map.title = "–ö–∞—Ä—Ç–∞ —Ä–∞–π–æ–Ω–æ–≤ ‚Äî –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ –∏ –õ–û";
  }
});

/* –ú–æ–¥–∞–ª–∫–∞ –ø–æ–ª–Ω–æ—Ä–∞–∑–º–µ—Ä–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Äî –î–û–ë–ê–í–õ–ï–ù–ê –ù–ê–í–ò–ì–ê–¶–ò–Ø (—Å—Ç—Ä–µ–ª–∫–∏/—Å–≤–∞–π–ø/–∏–Ω–¥–µ–∫—Å) */
(function modalImage(){
  const modal = qs('#modalImg');
  if(!modal) return;
  const img = qs('#modalImg__img');
  let images = [], index = 0, startX = 0, swiping = false;

  // –î–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç –≤ —Ä–∞–∑–º–µ—Ç–∫–µ
  let closeBtn = qs('#modalImg__close');
  if(!closeBtn){
    closeBtn = document.createElement('button');
    closeBtn.id = 'modalImg__close';
    closeBtn.type = 'button';
    closeBtn.setAttribute('aria-label','–ó–∞–∫—Ä—ã—Ç—å');
    closeBtn.textContent = '‚úï';
    closeBtn.style.position='absolute'; closeBtn.style.top='14px'; closeBtn.style.right='14px';
    modal.appendChild(closeBtn);
  }
  let prevBtn = qs('#modalImg__prev');
  if(!prevBtn){
    prevBtn = document.createElement('button');
    prevBtn.id = 'modalImg__prev';
    prevBtn.type = 'button';
    prevBtn.setAttribute('aria-label','–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ');
    prevBtn.textContent = '‚Äπ';
    modal.appendChild(prevBtn);
  }
  let nextBtn = qs('#modalImg__next');
  if(!nextBtn){
    nextBtn = document.createElement('button');
    nextBtn.id = 'modalImg__next';
    nextBtn.type = 'button';
    nextBtn.setAttribute('aria-label','–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ');
    nextBtn.textContent = '‚Ä∫';
    modal.appendChild(nextBtn);
  }
  let idxBadge = qs('#modalImg__idx');
  if(!idxBadge){
    idxBadge = document.createElement('div');
    idxBadge.id = 'modalImg__idx';
    modal.appendChild(idxBadge);
  }

  function render(){
    if(!images.length) return;
    img.src = images[index];
    idxBadge.textContent = `${index+1}/${images.length}`;
    prevBtn.style.display = nextBtn.style.display = (images.length>1?'block':'none');
  }

  window.openModalImage = function(src, arr=[], startIdx=0){
    images = arr.length ? arr : [src];
    const found = images.indexOf(src);
    index = (found>=0 ? found : Math.max(0, Math.min(startIdx, images.length-1)));
    render();
    modal.setAttribute('aria-hidden','false');
    document.body.classList.add('modal-open');
  };

  function close(){
    modal.setAttribute('aria-hidden','true');
    document.body.classList.remove('modal-open');
    img.src = ""; images = []; index = 0;
  }
  function next(){ index = (index + 1) % images.length; render(); }
  function prev(){ index = (index - 1 + images.length) % images.length; render(); }

  closeBtn.addEventListener('click', close);
  nextBtn.addEventListener('click', next);
  prevBtn.addEventListener('click', prev);
  modal.addEventListener('click', (e)=>{ if(e.target === modal) close(); });
  window.addEventListener('keydown', (e)=>{
    if(modal.getAttribute('aria-hidden') === 'false'){
      if(e.key === 'Escape') close();
      if(e.key === 'ArrowLeft') prev();
      if(e.key === 'ArrowRight') next();
    }
  });
  // –°–≤–∞–π–ø –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª–∫–∏
  modal.addEventListener('pointerdown', (e)=>{ if(modal.getAttribute('aria-hidden') === 'false'){ swiping = true; startX = e.clientX; }});
  modal.addEventListener('pointerup', (e)=>{ if(!swiping) return; const dx = e.clientX - startX; if(Math.abs(dx)>30){ dx<0 ? next() : prev(); } swiping=false; });
})();

/* –§–∏–ª—å—Ç—Ä –∏ –≤–∏–¥ –≥–∞–ª–µ—Ä–µ–∏ (–∫–∞–∫ –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–µ) */
(function initProjectFilter(){
  const grid = qs('#projectsGrid');
  qs('#filterBrick')?.addEventListener('click', ()=>{
    qsa('.card').forEach(c => {
      const t = c.querySelector('.meta')?.textContent || "";
      c.classList.toggle('dim', !/–ö–∏—Ä–ø–∏—á–Ω—ã–π/.test(t));
    });
  });
  qs('#filterAac')?.addEventListener('click', ()=>{
    qsa('.card').forEach(c => {
      const t = c.querySelector('.meta')?.textContent || "";
      c.classList.toggle('dim', !/–ì–∞–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π/.test(t));
    });
  });
  qs('#resetFilter')?.addEventListener('click', ()=>{
    qsa('.card').forEach(c => c.classList.remove('dim'));
  });
  // –í–∏–¥
  const saved = readLS('viewMode','comfort');
  if(saved === 'compact') grid.classList.add('compact');
  qs('#viewCompact')?.addEventListener('click', ()=>{
    grid.classList.add('compact'); saveLS('viewMode','compact');
  });
  qs('#viewComfort')?.addEventListener('click', ()=>{
    grid.classList.remove('compact'); saveLS('viewMode','comfort');
  });
})();

/* –ú–æ–¥–∞–ª–∫–∞: –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–∫–∞ –ø–æ –ª—é–±—ã–º .img-preview (–Ω–∞ —Å–ª—É—á–∞–π –¥–∏–Ω–∞–º–∏–∫–∏) */
(function delegatePreviewToModal(){
  qsa('.img-preview').forEach(a=>{
    a.addEventListener('click', (e)=>{
      e.preventDefault();
      const card = a.closest('.card');
      const imgs = (card?.getAttribute('data-images') || "").split(',').map(s=>s.trim()).filter(Boolean);
      const href = a.getAttribute('href') || a.querySelector('img')?.src;
      if(href) openModalImage(href, imgs, imgs.indexOf(href));
    });
  });
})();
</script>

